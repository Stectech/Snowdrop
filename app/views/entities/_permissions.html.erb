<% edit ||= false %>
<% model = entity.class.name.underscore %>
<% collapsed = session[:entity_permissions].nil? %>
<%= subtitle :entity_permissions, collapsed, t(:permissions) %>

<div class="section">
  <small id="entity_permissions_intro" style=<%"display: none;" unless collapsed%>>
    <%= get_default_permissions_intro(entity.access, t("#{model}_small")) unless edit%>
  </small>
  <div id="entity_permissions" style=<%"display: none;" if collapsed%>>
    <div class="radio_box">
      <%= f.radio_button :access, "Private", :onclick => "$('#people').hide()"%>
      <%= f.label :access_private, t(:keep_private), :style => "cursor:pointer"%>
    </div>
    <div class="radio_box">
      <%= f.radio_button :access, "Public", :onclick => "$('#people').hide()"%>
      <%= f.label :access_public, t(:make_public), :style => "cursor:pointer"%>
    </div>
    <div class="radio_box">
      <%= f.radio_button :access, "Shared", :onclick => "$('#people').show()"%>
      <%= f.label :access_shared, t(:share_with), :style => "cursor:pointer"%>
    </div>
  </div>
  <div id="people" style=<%"display: none;" if entity.access != "Shared"%>>
    <table>
        <tr>
          <td>
            <%= f.label :user_ids, "#{t(:users)}:"%>
            <br>
            <%= f.select :user_ids, user_options, {}, :multiple => true, :class => 'select2'%>
          </td>
        </tr>
        <tr>
          <td>
            <%= f.label :group_ids, "#{t(:groups)}:"%>
            <br>
            <%= f.select :group_ids, group_options, {}, :multiple => true, :class => 'select2'%>
          </td>
        </tr>
    </table>
    <% if !edit and entity.is_a?(Lead) %>
      <div class="radio_box">
        <%= f.radio_button :access, t(:campaign), :onclick => "$('#people').hide(); $('#lead_access_campaign').val('Campaign');", :disabled => true %>
        <font id="<%=:copy_permissions%>" color="<%=:grey%>">
          <%= t(:copy_permissions, t(:campaign_small))%>
        </font>
      </div>
    <% end %>
  </div>
</div>